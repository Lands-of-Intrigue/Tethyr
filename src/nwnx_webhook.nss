//                  https://discord.com/api/webhooks/960304258371162132/cRtRtRZyxnHfOPMXW0bFErcyq2hDDneu4UwOn2mat02T0kC38rZfEeFIbQWXqsF9SAdr
const string WEBHOOK_BANK_CHANNEL   = "/api/webhooks/960304258371162132/cRtRtRZyxnHfOPMXW0bFErcyq2hDDneu4UwOn2mat02T0kC38rZfEeFIbQWXqsF9SAdr/slack";
//          `       https://discord.com/api/webhooks/960304410813145208/xND7gViUN_hJD_z-uYBTPL25OG964XhsSzBq9wO2O128KwonNSmY08005qoc5GiyZh8t
const string WEBHOOK_DM_CHANNEL     = "/api/webhooks/960304410813145208/xND7gViUN_hJD_z-uYBTPL25OG964XhsSzBq9wO2O128KwonNSmY08005qoc5GiyZh8t/slack";
//                  https://discord.com/api/webhooks/960304805409071164/4GDwpB7ZseqPHy5i9qWrceppMnfTZs7bNNXBke438cO2B_fhosoySNhSFki6oW1lwV4t
const string WEBHOOK_TELL_CHANNEL   = "/api/webhooks/960304805409071164/4GDwpB7ZseqPHy5i9qWrceppMnfTZs7bNNXBke438cO2B_fhosoySNhSFki6oW1lwV4t/slack";
//                  https://discord.com/api/webhooks/960305000616173608/qzeBYjF0Kr_r1_1gQ-DuDfK8O2VsSEt-8jOkYIgF-hbKiyEC9Q0NRAJudxh-QZhd0t-v
const string WEBHOOK_CHAT_CHANNEL   = "/api/webhooks/960305000616173608/qzeBYjF0Kr_r1_1gQ-DuDfK8O2VsSEt-8jOkYIgF-hbKiyEC9Q0NRAJudxh-QZhd0t-v/slack";
//                  https://discord.com/api/webhooks/960305459544326204/-DGcgouvZcXecKgr-1k1prbJNr-AyNnvy2oaNZP-ALeDsy7Jf7zRBGSiR_m1tNvKdHzl
const string WEBHOOK_EVENT_CHANNEL  = "/api/webhooks/960305459544326204/-DGcgouvZcXecKgr-1k1prbJNr-AyNnvy2oaNZP-ALeDsy7Jf7zRBGSiR_m1tNvKdHzl/slack";
//                  https://discord.com/api/webhooks/960302944740311120/BDOlUkXgIM3Xoe2f3wyipkvi3EpNQZ69eDgeB4BeXJQb91nXPuDCEeQosKiLS7oJ2W4Y
const string WEBHOOK_PUBLIC_CHANNEL = "/api/webhooks/960302944740311120/BDOlUkXgIM3Xoe2f3wyipkvi3EpNQZ69eDgeB4BeXJQb91nXPuDCEeQosKiLS7oJ2W4Y/slack";
//                  https://discord.com/api/webhooks/965686694298927144/0w052NntBMG9Oup53Kvqys1QdSLSy2B4eXDkzc2p79onwxd0dq8HeyOtdTujGc6dbqeo
const string WEBHOOK_BUG_CHANNEL    = "/api/webhooks/965686694298927144/0w052NntBMG9Oup53Kvqys1QdSLSy2B4eXDkzc2p79onwxd0dq8HeyOtdTujGc6dbqeo/slack";
//                  https://discord.com/api/webhooks/966823325965901914/9J6hLO9DeqFYzWJUzVQayITUbLDwvRdsqxemgCAvnz5RCMGHa6F30NOD_CuKYV4913KW
const string WEBHOOK_BROST          = "/api/webhooks/966823325965901914/9J6hLO9DeqFYzWJUzVQayITUbLDwvRdsqxemgCAvnz5RCMGHa6F30NOD_CuKYV4913KW/slack";
//                  https://discord.com/api/webhooks/960308115994210395/TjPBJbTvYYgE1wwX7S5VG65Hqjjq0Vuo00qWKqfUWGDPYvmiYTdXk5ZPUhjS7e1yIwBf
const string WEBHOOK_LOCKWOOD       = "/api/webhooks/960308115994210395/TjPBJbTvYYgE1wwX7S5VG65Hqjjq0Vuo00qWKqfUWGDPYvmiYTdXk5ZPUhjS7e1yIwBf/slack";
//                  https://discord.com/api/webhooks/960309907561783336/B-ugUVkTXpvzwTBUtH4RgahhE_tH2Ex4YFRgVpYdvJUz7HgZbZXhynN-0C3Nwp55DMj0
const string WEBHOOK_SOUTHSPIRE     = "/api/webhooks/960309907561783336/B-ugUVkTXpvzwTBUtH4RgahhE_tH2Ex4YFRgVpYdvJUz7HgZbZXhynN-0C3Nwp55DMj0/slack";
//                  https://discord.com/api/webhooks/960309335597142067/THSVafyCty2gzdwOOQEatOQ6ZFPwmBJgMq7m0VxbZWmHmEnpUC_9moh6M6pKcZnXyhEi
const string WEBHOOK_SWAMPRISE      = "/api/webhooks/960309335597142067/THSVafyCty2gzdwOOQEatOQ6ZFPwmBJgMq7m0VxbZWmHmEnpUC_9moh6M6pKcZnXyhEi/slack";
//                  https://discord.com/api/webhooks/960310158519570522/Z8xuslGNBnQjmK4Hy7eO8-rtqjLEV9cYoEnffMCPdPzRqmMwW1pn6zc5zcnZ35mFg3XA
const string WEBHOOK_TEJARN         = "/api/webhooks/960310158519570522/Z8xuslGNBnQjmK4Hy7eO8-rtqjLEV9cYoEnffMCPdPzRqmMwW1pn6zc5zcnZ35mFg3XA/slack";

//                  https://discord.com/api/webhooks/960306598281109575/TBYFbEEf_Jkpmd63E9G1gU55ZFh0K6QQv60ixqYYl6KFC-k54_ytdQtu2DEPMSLAGqf4
const string WEBHOOK_BELL           = "api/webhooks/960306598281109575/TBYFbEEf_Jkpmd63E9G1gU55ZFh0K6QQv60ixqYYl6KFC-k54_ytdQtu2DEPMSLAGqf4/slack";

/// @addtogroup webhook Webhook
/// @brief Send messages to external entities through web hooks.
/// @{
/// @file nwnx_webhook.nss

#include "nwnx"

const string NWNX_WebHook = "NWNX_WebHook"; ///< @private

/// @brief Send a slack compatible webhook.
/// @param host The web server to send the hook.
/// @param path The path to the hook.
/// @param message The message to dispatch.
/// @param username The username to display as the originator of the hook.
/// @param mrkdwn Set to false if you do not wish your message's markdown be parsed.
void NWNX_WebHook_SendWebHookHTTPS(string host, string path, string message, string username = "", int mrkdwn = 1);

/// @brief Resends a webhook message after a defined delay.
///
/// Handy when a submission is rate limited, since the message that the event sends in NWNX_Events_GetEventData
/// is already constructed. So it just resends the WebHook with an optional delay.
/// @param host The web server to send the hook.
/// @param path The path to the hook.
/// @param sMessage The message to dispatch.
/// @param delay The delay in seconds to send the message again.
void NWNX_WebHook_ResendWebHookHTTPS(string host, string path, string sMessage, float delay = 0.0f);

/// @}

void NWNX_WebHook_SendWebHookHTTPS(string host, string path, string message, string username = "", int mrkdwn = 1)
{
    string sFunc = "SendWebHookHTTPS";
    NWNX_PushArgumentInt(NWNX_WebHook, sFunc, mrkdwn);
    NWNX_PushArgumentString(NWNX_WebHook, sFunc, username);
    NWNX_PushArgumentString(NWNX_WebHook, sFunc, message);
    NWNX_PushArgumentString(NWNX_WebHook, sFunc, path);
    NWNX_PushArgumentString(NWNX_WebHook, sFunc, host);
    NWNX_CallFunction(NWNX_WebHook, sFunc);
}

void NWNX_WebHook_ResendWebHookHTTPS(string host, string path, string sMessage, float delay = 0.0f)
{
    DelayCommand(delay, NWNX_WebHook_SendWebHookHTTPS(host, path, sMessage));
}
